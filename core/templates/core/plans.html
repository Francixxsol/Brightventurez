{% extends "core/base.html" %}
{% block content %}

<section class="card">
  <h1 style="text-align:center;">Why suffer with official prices when our VTU dey do magic? Instant delivery, no network excuses, and prices so clean dem dey shine like new iPhone screen. 
Grab your plan now before NEPA takes the light and your data allowance too ðŸ˜‚</h1>
  <p class="sub" style="text-align:center;">with just our unbeatable prices front and center. No fluff, no wahala, just straight savings that hit different. ðŸ˜Ž</p>

  <!-- Filters -->
  <div class="filters">
    <label>Network</label>
    <select id="networkFilter">
      <option value="">-- All Networks --</option>
      {% for network in networks %}
        <option value="{{ network.name }}">{{ network.name }}</option>
      {% endfor %}
    </select>

    <label>Plan Type</label>
    <select id="planTypeFilter">
      <option value="">-- All Plan Types --</option>
      <option value="SME">SME</option>
      <option value="CG">Corporate</option>
      <option value="Special">Special</option>
      <option value="Datacard">Data Card</option>
    </select>
  </div>

  <!-- Plans Cards -->
  <div class="plans-cards-container">
    {% for network in networks %}
      <h2 style="color:{{ network.color }};">{{ network.name }} Plans</h2>
      <div class="cards-grid">
        {% for plan in network.plans %}
          <div class="plan-card" data-network="{{ network.name }}" data-plan-type="{{ plan.plan_type }}">
            <div class="plan-type" style="background: {{ network.color }};">{{ plan.plan_type }}</div>
            <div class="plan-name">{{ plan.plan_name }}</div>
            <div class="plan-price">â‚¦ {{ plan.our_price }}</div>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
</section>

<style>
.card { padding:25px; max-width:1200px; margin:30px auto; background:#1a1b3a; color:#fff; border-radius:16px; box-shadow:0 0 40px rgba(75,108,183,0.3);}
.filters { display:flex; gap:20px; flex-wrap:wrap; margin-bottom:30px; justify-content:center;}
.filters label { display:block; font-weight:600; margin-top:10px;}
.filters select { padding:10px 15px; border-radius:10px; border:none; background:#2b2c50; color:#fff; font-weight:500;}

.cards-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:20px; margin-top:20px;}
.plan-card { background:#2b2c50; padding:20px; border-radius:16px; box-shadow:0 5px 20px rgba(0,0,0,0.3); transition:0.3s; text-align:center; cursor:pointer;}
.plan-card:hover { transform: translateY(-8px) scale(1.03); box-shadow:0 15px 25px rgba(0,0,0,0.5);}
.plan-type { font-weight:700; color:#fff; padding:5px 10px; border-radius:8px; margin-bottom:15px; display:inline-block;}
.plan-name { font-size:1.1em; font-weight:600; margin-bottom:10px;}
.plan-price { font-size:1.4em; font-weight:800; color:#f0f0f0; margin-top:5px;}

/* Responsive adjustments */
@media (max-width:768px) {
  .cards-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
  .plan-card { padding:15px; }
}
@media (max-width:480px) {
  .cards-grid { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
  .plan-name { font-size:1em; }
  .plan-price { font-size:1.2em; }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const networkSelect = document.getElementById("networkFilter");
  const planTypeSelect = document.getElementById("planTypeFilter");
  const planCards = document.querySelectorAll(".plan-card");

  function filterPlans() {
    const selectedNetwork = networkSelect.value;
    const selectedPlanType = planTypeSelect.value;

    planCards.forEach(card => {
      const rowNetwork = card.dataset.network;
      const rowPlanType = card.dataset.planType;

      if ((selectedNetwork === "" || rowNetwork === selectedNetwork) &&
          (selectedPlanType === "" || rowPlanType.toLowerCase() === selectedPlanType.toLowerCase())) {
        card.style.display = "";
      } else {
        card.style.display = "none";
      }
    });
  }

  networkSelect.addEventListener("change", filterPlans);
  planTypeSelect.addEventListener("change", filterPlans);
});
</script>

{% endblock %}
